method.fold.ds2 <- data.frame(df = 5, MSE = method.fold.data[,1])
method.fold.ds <- rbind(method.ds, method.ds2)
}
ignore.ds$df <- as.factor(ignore.ds$df)
method.ds$df <- as.factor(method.ds$df)
method.fold.ds$df <- as.factor(method.fold.ds$df)
# Making a ggplot object for the MSE spread comparison
plot1 <- ggplot(data = ignore.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("Ignoring Design") +
ylim(18000, 19000)
plot2 <- ggplot(data = method.fold.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("No Folds") +
ylim(18000, 19000)
plot3 <- ggplot(data = method.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("Accounting for Design") +
ylim(18000, 19000)
# Making a grid display of the two plot objects above
grid.arrange(plot1,plot2,plot3, ncol = 3)
}
# we see a significant difference here
income.year_edu.plot(loops = 10)
# we see a significant difference here
income.year_edu.plot(loops = 100)
document()
library(devtools)
document()
document()
library(surveyCV)
library(surveyCV)
library(surveyCV)
data("NSFG_data")
library(devtools)
?usethis::use_data()
?usethis::use_data(NSF_data)
usethis::use_data(NSF_data)
usethis::use_data(NSFG_data)
load("~/Desktop/surveyCV/data/NSFG_data.rda")
load("~/Desktop/surveyCV/data/NSFG_data.rda")
View(NSFG_data)
library(surveyCV)
income.year_edu.plot <- function(loops) {
# Making an empty data set for output when we take into consideration the design method
method.ds <- data.frame(MSE = c())
# Making an empty data set for output when we ignore the design method
ignore.ds <- data.frame(MSE = c())
#Making an empty dataset for output when we take into account everything except during fold generation
method.fold.ds <- data.frame(MSE = c())
# looping and generating MSEs
for (i in 1:loops) {
set.seed(i)
method.data <- cv.svy(NSFG_data, c("income~ns(YrEdu, df = 1)","income~ns(YrEdu, df = 2)","income~ns(YrEdu, df = 3)","income~ns(YrEdu, df = 4)","income~ns(YrEdu, df = 5)"), nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
method.ds2 <- data.frame(df = 5, MSE = method.data[,1])
method.ds <- rbind(method.ds, method.ds2)
ignore.data <- cv.svy(NSFG_data, c("income~ns(YrEdu, df = 1)","income~ns(YrEdu, df = 2)","income~ns(YrEdu, df = 3)","income~ns(YrEdu, df = 4)","income~ns(YrEdu, df = 5)"), nfolds = 4, weights = "wgt", N = 5100)
ignore.ds2 <- data.frame(df = 1:5, MSE = ignore.data[,1])
ignore.ds <- rbind(ignore.ds, ignore.ds2)
method.fold.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
method.fold.ds2 <- data.frame(df = 5, MSE = method.fold.data[,1])
method.fold.ds <- rbind(method.ds, method.ds2)
}
ignore.ds$df <- as.factor(ignore.ds$df)
method.ds$df <- as.factor(method.ds$df)
method.fold.ds$df <- as.factor(method.fold.ds$df)
# Making a ggplot object for the MSE spread comparison
plot1 <- ggplot(data = ignore.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("Ignoring Design") +
ylim(18000, 19000)
plot2 <- ggplot(data = method.fold.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("No Folds") +
ylim(18000, 19000)
plot3 <- ggplot(data = method.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("Accounting for Design") +
ylim(18000, 19000)
# Making a grid display of the two plot objects above
grid.arrange(plot1,plot2,plot3, ncol = 3)
}
)
# looping and generating MSEs
for (i in 1:loops) {
set.seed(i)
method.data <- cv.svy(NSFG_data, c("income~ns(YrEdu, df = 1)","income~ns(YrEdu, df = 2)","income~ns(YrEdu, df = 3)","income~ns(YrEdu, df = 4)","income~ns(YrEdu, df = 5)"), nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
method.ds2 <- data.frame(df = 5, MSE = method.data[,1])
method.ds <- rbind(method.ds, method.ds2)
ignore.data <- cv.svy(NSFG_data, c("income~ns(YrEdu, df = 1)","income~ns(YrEdu, df = 2)","income~ns(YrEdu, df = 3)","income~ns(YrEdu, df = 4)","income~ns(YrEdu, df = 5)"), nfolds = 4, weights = "wgt", N = 5100)
ignore.ds2 <- data.frame(df = 1:5, MSE = ignore.data[,1])
ignore.ds <- rbind(ignore.ds, ignore.ds2)
method.fold.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
method.fold.ds2 <- data.frame(df = 5, MSE = method.fold.data[,1])
method.fold.ds <- rbind(method.ds, method.ds2)
}
income.year_edu.plot <- function(loops) {
# Making an empty data set for output when we take into consideration the design method
method.ds <- data.frame(MSE = c())
# Making an empty data set for output when we ignore the design method
ignore.ds <- data.frame(MSE = c())
#Making an empty dataset for output when we take into account everything except during fold generation
method.fold.ds <- data.frame(MSE = c())
# looping and generating MSEs
for (i in 1:loops) {
set.seed(i)
method.data <- cv.svy(NSFG_data, c("income~ns(YrEdu, df = 1)","income~ns(YrEdu, df = 2)","income~ns(YrEdu, df = 3)","income~ns(YrEdu, df = 4)","income~ns(YrEdu, df = 5)"), nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
method.ds2 <- data.frame(df = 5, MSE = method.data[,1])
method.ds <- rbind(method.ds, method.ds2)
ignore.data <- cv.svy(NSFG_data, c("income~ns(YrEdu, df = 1)","income~ns(YrEdu, df = 2)","income~ns(YrEdu, df = 3)","income~ns(YrEdu, df = 4)","income~ns(YrEdu, df = 5)"), nfolds = 4, weights = "wgt", N = 5100)
ignore.ds2 <- data.frame(df = 1:5, MSE = ignore.data[,1])
ignore.ds <- rbind(ignore.ds, ignore.ds2)
method.fold.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
method.fold.ds2 <- data.frame(df = 5, MSE = method.fold.data[,1])
method.fold.ds <- rbind(method.ds, method.ds2)
}
ignore.ds$df <- as.factor(ignore.ds$df)
method.ds$df <- as.factor(method.ds$df)
method.fold.ds$df <- as.factor(method.fold.ds$df)
# Making a ggplot object for the MSE spread comparison
plot1 <- ggplot(data = ignore.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("Ignoring Design") +
ylim(18000, 19000)
plot2 <- ggplot(data = method.fold.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("No Folds") +
ylim(18000, 19000)
plot3 <- ggplot(data = method.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("Accounting for Design") +
ylim(18000, 19000)
# Making a grid display of the two plot objects above
grid.arrange(plot1,plot2,plot3, ncol = 3)
}
income.year_edu.plot(10)
library(surveyCV)
income.year_edu.plot <- function(loops) {
# Making an empty data set for output when we take into consideration the design method
method.ds <- data.frame(MSE = c())
# Making an empty data set for output when we ignore the design method
ignore.ds <- data.frame(MSE = c())
#Making an empty dataset for output when we take into account everything except during fold generation
method.fold.ds <- data.frame(MSE = c())
# looping and generating MSEs
for (i in 1:loops) {
set.seed(i)
method.data <- cv.svy(NSFG_data, c("income~ns(YrEdu, df = 1)","income~ns(YrEdu, df = 2)","income~ns(YrEdu, df = 3)","income~ns(YrEdu, df = 4)","income~ns(YrEdu, df = 5)"), nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
method.ds2 <- data.frame(df = 5, MSE = method.data[,1])
method.ds <- rbind(method.ds, method.ds2)
ignore.data <- cv.svy(NSFG_data, c("income~ns(YrEdu, df = 1)","income~ns(YrEdu, df = 2)","income~ns(YrEdu, df = 3)","income~ns(YrEdu, df = 4)","income~ns(YrEdu, df = 5)"), nfolds = 4, weights = "wgt", N = 5100)
ignore.ds2 <- data.frame(df = 1:5, MSE = ignore.data[,1])
ignore.ds <- rbind(ignore.ds, ignore.ds2)
method.fold.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
method.fold.ds2 <- data.frame(df = 5, MSE = method.fold.data[,1])
method.fold.ds <- rbind(method.ds, method.ds2)
}
ignore.ds$df <- as.factor(ignore.ds$df)
method.ds$df <- as.factor(method.ds$df)
method.fold.ds$df <- as.factor(method.fold.ds$df)
# Making a ggplot object for the MSE spread comparison
plot1 <- ggplot(data = ignore.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("Ignoring Design") +
ylim(18000, 19000)
plot2 <- ggplot(data = method.fold.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("No Folds") +
ylim(18000, 19000)
plot3 <- ggplot(data = method.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("Accounting for Design") +
ylim(18000, 19000)
# Making a grid display of the two plot objects above
grid.arrange(plot1,plot2,plot3, ncol = 3)
}
income.year_edu.plot(10)
library(ggplot2)
library(dplyr)
library(splines)
library(gridExtra)
income.year_edu.plot(10)
income.year_edu.plot <- function(loops) {
# Making an empty data set for output when we take into consideration the design method
method.ds <- data.frame(MSE = c())
# Making an empty data set for output when we ignore the design method
ignore.ds <- data.frame(MSE = c())
#Making an empty dataset for output when we take into account everything except during fold generation
method.fold.ds <- data.frame(MSE = c())
# looping and generating MSEs
for (i in 1:loops) {
set.seed(i)
method.data <- cv.svy(NSFG_data, c("income~ns(YrEdu, df = 1)","income~ns(YrEdu, df = 2)","income~ns(YrEdu, df = 3)","income~ns(YrEdu, df = 4)","income~ns(YrEdu, df = 5)"), nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
method.ds2 <- data.frame(df = 1:5, MSE = method.data[,1])
method.ds <- rbind(method.ds, method.ds2)
ignore.data <- cv.svy(NSFG_data, c("income~ns(YrEdu, df = 1)","income~ns(YrEdu, df = 2)","income~ns(YrEdu, df = 3)","income~ns(YrEdu, df = 4)","income~ns(YrEdu, df = 5)"), nfolds = 4, weights = "wgt", N = 5100)
ignore.ds2 <- data.frame(df = 1:5, MSE = ignore.data[,1])
ignore.ds <- rbind(ignore.ds, ignore.ds2)
method.fold.data <- cv.svy(NSFG_data, c("income~ns(YrEdu, df = 1)","income~ns(YrEdu, df = 2)","income~ns(YrEdu, df = 3)","income~ns(YrEdu, df = 4)","income~ns(YrEdu, df = 5)"), nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
method.fold.ds2 <- data.frame(df = 1:5, MSE = method.fold.data[,1])
method.fold.ds <- rbind(method.ds, method.ds2)
}
ignore.ds$df <- as.factor(ignore.ds$df)
method.ds$df <- as.factor(method.ds$df)
method.fold.ds$df <- as.factor(method.fold.ds$df)
# Making a ggplot object for the MSE spread comparison
plot1 <- ggplot(data = ignore.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("Ignoring Design") +
ylim(18000, 19000)
plot2 <- ggplot(data = method.fold.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("No Folds") +
ylim(18000, 19000)
plot3 <- ggplot(data = method.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("Accounting for Design") +
ylim(18000, 19000)
# Making a grid display of the two plot objects above
grid.arrange(plot1,plot2,plot3, ncol = 3)
}
income.year_edu.plot(10)
income.year_edu.plot(100)
income.year_edu.plot <- function(loops) {
# Making an empty data set for output when we take into consideration the design method
method.ds <- data.frame(MSE = c())
# Making an empty data set for output when we ignore the design method
ignore.ds <- data.frame(MSE = c())
#Making an empty dataset for output when we take into account everything except during fold generation
method.fold.ds <- data.frame(MSE = c())
# looping and generating MSEs
for (i in 1:loops) {
set.seed(i)
method.data <- cv.svy(NSFG_data, c("income~ns(YrEdu, df = 1)","income~ns(YrEdu, df = 2)","income~ns(YrEdu, df = 3)","income~ns(YrEdu, df = 4)","income~ns(YrEdu, df = 5)","income~ns(YrEdu, df = 6)"), nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
method.ds2 <- data.frame(df = 1:6, MSE = method.data[,1])
method.ds <- rbind(method.ds, method.ds2)
ignore.data <- cv.svy(NSFG_data, c("income~ns(YrEdu, df = 1)","income~ns(YrEdu, df = 2)","income~ns(YrEdu, df = 3)","income~ns(YrEdu, df = 4)","income~ns(YrEdu, df = 5)","income~ns(YrEdu, df = 6)"), nfolds = 4, weights = "wgt", N = 5100)
ignore.ds2 <- data.frame(df = 1:6, MSE = ignore.data[,1])
ignore.ds <- rbind(ignore.ds, ignore.ds2)
method.fold.data <- cv.svy(NSFG_data, c("income~ns(YrEdu, df = 1)","income~ns(YrEdu, df = 2)","income~ns(YrEdu, df = 3)","income~ns(YrEdu, df = 4)","income~ns(YrEdu, df = 5)","income~ns(YrEdu, df = 6)"), nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
method.fold.ds2 <- data.frame(df = 1:6, MSE = method.fold.data[,1])
method.fold.ds <- rbind(method.ds, method.ds2)
}
ignore.ds$df <- as.factor(ignore.ds$df)
method.ds$df <- as.factor(method.ds$df)
method.fold.ds$df <- as.factor(method.fold.ds$df)
# Making a ggplot object for the MSE spread comparison
plot1 <- ggplot(data = ignore.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("Ignoring Design") +
ylim(18000, 19000)
plot2 <- ggplot(data = method.fold.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("No Folds") +
ylim(18000, 19000)
plot3 <- ggplot(data = method.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("Accounting for Design") +
ylim(18000, 19000)
# Making a grid display of the two plot objects above
grid.arrange(plot1,plot2,plot3, ncol = 3)
}
income.year_edu.plot(100)
income.year_edu.plot(10)
income.year_edu.plot <- function(loops) {
# Making an empty data set for output when we take into consideration the design method
method.ds <- data.frame(MSE = c())
# Making an empty data set for output when we ignore the design method
ignore.ds <- data.frame(MSE = c())
#Making an empty dataset for output when we take into account everything except during fold generation
method.fold.ds <- data.frame(MSE = c())
# looping and generating MSEs
for (i in 1:loops) {
set.seed(i)
method.data <- cv.svy(NSFG_data, c("income~ns(YrEdu, df = 1)","income~ns(YrEdu, df = 2)","income~ns(YrEdu, df = 3)","income~ns(YrEdu, df = 4)","income~ns(YrEdu, df = 5)","income~ns(YrEdu, df = 6)","income~ns(YrEdu, df = 7)"), nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
method.ds2 <- data.frame(df = 1:7, MSE = method.data[,1])
method.ds <- rbind(method.ds, method.ds2)
ignore.data <- cv.svy(NSFG_data, c("income~ns(YrEdu, df = 1)","income~ns(YrEdu, df = 2)","income~ns(YrEdu, df = 3)","income~ns(YrEdu, df = 4)","income~ns(YrEdu, df = 5)","income~ns(YrEdu, df = 6)","income~ns(YrEdu, df = 7)"), nfolds = 4, weights = "wgt", N = 5100)
ignore.ds2 <- data.frame(df = 1:7, MSE = ignore.data[,1])
ignore.ds <- rbind(ignore.ds, ignore.ds2)
method.fold.data <- cv.svy(NSFG_data, c("income~ns(YrEdu, df = 1)","income~ns(YrEdu, df = 2)","income~ns(YrEdu, df = 3)","income~ns(YrEdu, df = 4)","income~ns(YrEdu, df = 5)","income~ns(YrEdu, df = 6)","income~ns(YrEdu, df = 7)"), nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
method.fold.ds2 <- data.frame(df = 1:7, MSE = method.fold.data[,1])
method.fold.ds <- rbind(method.ds, method.ds2)
}
ignore.ds$df <- as.factor(ignore.ds$df)
method.ds$df <- as.factor(method.ds$df)
method.fold.ds$df <- as.factor(method.fold.ds$df)
# Making a ggplot object for the MSE spread comparison
plot1 <- ggplot(data = ignore.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("Ignoring Design") +
ylim(18000, 19000)
plot2 <- ggplot(data = method.fold.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("No Folds") +
ylim(18000, 19000)
plot3 <- ggplot(data = method.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("Accounting for Design") +
ylim(18000, 19000)
# Making a grid display of the two plot objects above
grid.arrange(plot1,plot2,plot3, ncol = 3)
}
income.year_edu.plot(10)
library(surveyCV)
library(devtools)
library(roxygen2)
setwd("~/Desktop/surveyCV")
document()
income.year_edu.plot <- function(loops) {
# Making an empty data set for output when we take into consideration the design method
method.ds <- data.frame(MSE = c())
# Making an empty data set for output when we ignore the design method
ignore.ds <- data.frame(MSE = c())
#Making an empty dataset for output when we take into account everything except during fold generation
method.fold.ds <- data.frame(MSE = c())
# looping and generating MSEs
for (i in 1:loops) {
set.seed(i)
method.data <- cv.svy(NSFG_data, c("income~ns(YrEdu, df = 1)","income~ns(YrEdu, df = 2)","income~ns(YrEdu, df = 3)","income~ns(YrEdu, df = 4)","income~ns(YrEdu, df = 5)","income~ns(YrEdu, df = 6)"), nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
method.ds2 <- data.frame(df = 1:6, MSE = method.data[,1])
method.ds <- rbind(method.ds, method.ds2)
ignore.data <- cv.svy(NSFG_data, c("income~ns(YrEdu, df = 1)","income~ns(YrEdu, df = 2)","income~ns(YrEdu, df = 3)","income~ns(YrEdu, df = 4)","income~ns(YrEdu, df = 5)","income~ns(YrEdu, df = 6)"), nfolds = 4, weights = "wgt", N = 5100)
ignore.ds2 <- data.frame(df = 1:6, MSE = ignore.data[,1])
ignore.ds <- rbind(ignore.ds, ignore.ds2)
method.fold.data <- cv.svy(NSFG_data, c("income~ns(YrEdu, df = 1)","income~ns(YrEdu, df = 2)","income~ns(YrEdu, df = 3)","income~ns(YrEdu, df = 4)","income~ns(YrEdu, df = 5)","income~ns(YrEdu, df = 6)"), nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
method.fold.ds2 <- data.frame(df = 1:6, MSE = method.fold.data[,1])
method.fold.ds <- rbind(method.ds, method.ds2)
}
ignore.ds$df <- as.factor(ignore.ds$df)
method.ds$df <- as.factor(method.ds$df)
method.fold.ds$df <- as.factor(method.fold.ds$df)
# Making a ggplot object for the MSE spread comparison
plot1 <- ggplot(data = ignore.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("Ignoring Design") +
ylim(18000, 19000)
plot2 <- ggplot(data = method.fold.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("No Folds") +
ylim(18000, 19000)
plot3 <- ggplot(data = method.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("Accounting for Design") +
ylim(18000, 19000)
# Making a grid display of the two plot objects above
grid.arrange(plot1,plot2,plot3, ncol = 3)
}
income.year_edu.plot(100)
library(surveyCV)
library(ggplot2)
library(ggplot2)
library(dplyr)
library(splines)
library(gridExtra)
income.year_edu.plot <- function(loops) {
# Making an empty data set for output when we take into consideration the design method
method.ds <- data.frame(MSE = c())
# Making an empty data set for output when we ignore the design method
ignore.ds <- data.frame(MSE = c())
#Making an empty dataset for output when we take into account everything except during fold generation
method.fold.ds <- data.frame(MSE = c())
# looping and generating MSEs
for (i in 1:loops) {
set.seed(i)
method.data <- cv.svy(NSFG_data, c("income~ns(YrEdu, df = 1)","income~ns(YrEdu, df = 2)","income~ns(YrEdu, df = 3)","income~ns(YrEdu, df = 4)","income~ns(YrEdu, df = 5)","income~ns(YrEdu, df = 6)"), nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
method.ds2 <- data.frame(df = 1:6, MSE = method.data[,1])
method.ds <- rbind(method.ds, method.ds2)
ignore.data <- cv.svy(NSFG_data, c("income~ns(YrEdu, df = 1)","income~ns(YrEdu, df = 2)","income~ns(YrEdu, df = 3)","income~ns(YrEdu, df = 4)","income~ns(YrEdu, df = 5)","income~ns(YrEdu, df = 6)"), nfolds = 4, weights = "wgt", N = 5100)
ignore.ds2 <- data.frame(df = 1:6, MSE = ignore.data[,1])
ignore.ds <- rbind(ignore.ds, ignore.ds2)
method.fold.data <- cv.svy(NSFG_data, c("income~ns(YrEdu, df = 1)","income~ns(YrEdu, df = 2)","income~ns(YrEdu, df = 3)","income~ns(YrEdu, df = 4)","income~ns(YrEdu, df = 5)","income~ns(YrEdu, df = 6)"), nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
method.fold.ds2 <- data.frame(df = 1:6, MSE = method.fold.data[,1])
method.fold.ds <- rbind(method.ds, method.ds2)
}
ignore.ds$df <- as.factor(ignore.ds$df)
method.ds$df <- as.factor(method.ds$df)
method.fold.ds$df <- as.factor(method.fold.ds$df)
# Making a ggplot object for the MSE spread comparison
plot1 <- ggplot(data = ignore.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("Ignoring Design") +
ylim(18000, 19000)
plot2 <- ggplot(data = method.fold.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("No Folds") +
ylim(18000, 19000)
plot3 <- ggplot(data = method.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("Accounting for Design") +
ylim(18000, 19000)
# Making a grid display of the two plot objects above
grid.arrange(plot1,plot2,plot3, ncol = 3)
}
income.year_edu.plot(100)
library(surveyCV)
library(survey)
library(ISLR)
library(dplyr)
library(splines)
library(sampling)
library(gridExtra)
library(grid)
library(ggplot2)
library(lattice)
data("NSFG_data")
plot_list3 <- surveyCV:::plot_generation3()
NSFG.plot <- plot_list3$NSFG.plot
NSFG.cluster.plot <- plot_list3$NSFG.cluster.plot
NSFG.strata.plot <- plot_list3$NSFG.strata.plot
plot_list <- surveyCV:::plot_generation()
sim.clusvsrs.sd.n100 <- plot_list$sim.clusvsrs.sd.n100
sim.clusvsrs.bp.n100 <- plot_list$sim.clusvsrs.bp.n100
sim.stratvsrs.bp.n100 <- plot_list$sim.stratvsrs.bp.n100
plot_list2 <- surveyCV:::plot_generation2()
Main.weights.plot <- plot_list2$Main.weights.plot
quad.sample.graph <- plot_list2$quad.sample.graph
data("NSFG_data")
plot_list3 <- surveyCV:::plot_generation3()
NSFG.plot <- plot_list3$NSFG.plot
NSFG.cluster.plot <- plot_list3$NSFG.cluster.plot
NSFG.strata.plot <- plot_list3$NSFG.strata.plot
grid.draw(NSFG.cluster.plot)
grid.draw(NSFG.strata.plot)
grid.draw(NSFG.plot)
data("NSFG_data")
plot_list3 <- surveyCV:::plot_generation3()
NSFG.strata.plot <- plot_list3$NSFG.strata.plot
data("NSFG_data")
plot_list3 <- surveyCV:::plot_generation3()
NSFG.strata.plot <- plot_list3$NSFG.strata.plot
library(surveyCV)
grid.draw(NSFG.strata.plot)
library(surveyCV)
data("NSFG_data")
plot_list3 <- surveyCV:::plot_generation3()
NSFG.strata.plot <- plot_list3$NSFG.strata.plot
grid.draw(NSFG.strata.plot)
library(surveyCV)
data("NSFG_data")
plot_list3 <- surveyCV:::plot_generation3()
NSFG.strata.plot <- plot_list3$NSFG.strata.plot
grid.draw(NSFG.strata.plot)
income.year_edu.plot <- function(loops) {
# Making an empty data set for output when we take into consideration the design method
method.ds <- data.frame(MSE = c())
# Making an empty data set for output when we ignore the design method
ignore.ds <- data.frame(MSE = c())
#Making an empty dataset for output when we take into account everything except during fold generation
method.fold.ds <- data.frame(MSE = c())
# looping and generating MSEs
for (i in 1:loops) {
set.seed(i)
method.data <- cv.svy(NSFG_data, c("income~ns(YrEdu, df = 1)","income~ns(YrEdu, df = 2)","income~ns(YrEdu, df = 3)","income~ns(YrEdu, df = 4)","income~ns(YrEdu, df = 5)","income~ns(YrEdu, df = 6)"), nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
method.ds2 <- data.frame(df = 1:6, MSE = method.data[,1])
method.ds <- rbind(method.ds, method.ds2)
ignore.data <- cv.svy(NSFG_data, c("income~ns(YrEdu, df = 1)","income~ns(YrEdu, df = 2)","income~ns(YrEdu, df = 3)","income~ns(YrEdu, df = 4)","income~ns(YrEdu, df = 5)","income~ns(YrEdu, df = 6)"), nfolds = 4, N = 5100)
ignore.ds2 <- data.frame(df = 1:6, MSE = ignore.data[,1])
ignore.ds <- rbind(ignore.ds, ignore.ds2)
method.fold.data <- cv.svy(NSFG_data, c("income~ns(YrEdu, df = 1)","income~ns(YrEdu, df = 2)","income~ns(YrEdu, df = 3)","income~ns(YrEdu, df = 4)","income~ns(YrEdu, df = 5)","income~ns(YrEdu, df = 6)"), nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
method.fold.ds2 <- data.frame(df = 1:6, MSE = method.fold.data[,1])
method.fold.ds <- rbind(method.ds, method.ds2)
}
ignore.ds$df <- as.factor(ignore.ds$df)
method.ds$df <- as.factor(method.ds$df)
method.fold.ds$df <- as.factor(method.fold.ds$df)
# Making a ggplot object for the MSE spread comparison
plot1 <- ggplot(data = ignore.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("Ignoring Design") +
ylim(18000, 19000)
plot2 <- ggplot(data = method.fold.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("No Folds") +
ylim(18000, 19000)
plot3 <- ggplot(data = method.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("Accounting for Design") +
ylim(18000, 19000)
# Making a grid display of the two plot objects above
grid.arrange(plot1,plot2,plot3, ncol = 3)
}
income.year_edu.plot(10)
income.year_edu.plot(100)
document()
library(devtools)
library(roxygen2)
setwd("~/Desktop/surveyCV")
document()
library(surveyCV)
library(surveyCV)
library(surveyCV)
