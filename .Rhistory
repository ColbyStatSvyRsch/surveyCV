<<<<<<< HEAD
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = TRUE)
cv.svy(NSFG_data, "PregNum~YrEdu", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = TRUE)
cv.svy(NSFG_data, "PregNum~YrEdu", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = FALSE)
cv.svy(NSFG_data, "PregNum~YrEdu", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 6000, afolds = FALSE)
cv.svy(NSFG_data, "PregNum~YrEdu", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 6000, afolds = TRUE)
cv.svy(NSFG_data, "PregNum~YrEdu", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_data, "PregNum~YrEdu", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = TRUE)
ggplot(NSFG_data, aes(x = YrEdu, y = PregNum, color = SECU)) +
geom_jitter() +
facet_wrap(SECU~., ncol = 2)
ggplot(NSFG_data, aes(x = YrEdu, y = PregNum, color = strata)) +
geom_jitter() +
facet_wrap(strata~., ncol = 2)
ggplot(NSFG_data, aes(x = age, y = PregNum, color = SECU)) +
geom_jitter() +
facet_wrap(SECU~., ncol = 2)
ggplot(NSFG_data, aes(x = age, y = PregNum, color = strata)) +
geom_jitter() +
facet_wrap(strata~., ncol = 2)
cv.svy(NSFG_data, "PregNum~age", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_data, "PregNum~age", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = TRUE)
ggplot(NSFG_data, aes(x = race, y = income, color = SECU)) +
geom_jitter() +
geom_boxplot() +
facet_wrap(SECU~., ncol = 2)
ggplot(NSFG_data, aes(x = race, y = income, color = SECU)) +
geom_boxplot() +
geom_jitter() +
facet_wrap(SECU~., ncol = 2)
ggplot(NSFG_data, aes(x = race, y = income, color = SECU)) +
geom_boxplot() +
facet_wrap(SECU~., ncol = 2)
ggplot(NSFG_data, aes(x = race, y = income, color = strata)) +
geom_boxplot() +
facet_wrap(strata~., ncol = 2)
cv.svy(NSFG_data, "race~income", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_data, "income~race", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_data, "income~race", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = TRUE)
cv.svy(NSFG_data, "PregNum~race", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_data, "PregNum~race", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = TRUE)
ggplot(NSFG_data, aes(x = race, y = PregNum, color = SECU)) +
geom_boxplot() +
facet_wrap(SECU~., ncol = 2)
ggplot(NSFG_data, aes(x = race, y = PregNum, color = strata)) +
geom_boxplot() +
facet_wrap(strata~., ncol = 2)
library(splines)
cv.svy(NSFG_data, "PregNum~ns(race,df = 1)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_data, "income~YrEdu", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_data, "income~YrEdu", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = TRUE)
cv.svy(NSFG_data, "income~YrEdu", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_data, "income~YrEdu", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = TRUE)
cv.svy(NSFG_data, "income~YrEdu", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_data, "income~YrEdu", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = TRUE)
cv.svy(NSFG_data, "income~YrEdu", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_data, "income~YrEdu", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = TRUE)
ggplot(NSFG_data, aes(x = YrEdu, y = income, color = SECU)) +
geom_boxplot() +
facet_wrap(SECU~., ncol = 2)
ggplot(NSFG_data, aes(x = YrEdu, y = income, color = SECU)) +
geom_jitter() +
facet_wrap(SECU~., ncol = 2)
ggplot(NSFG_data, aes(x = YrEdu, y = income, color = SECU)) +
geom_jitter() +
geom_smooth(method = "loess", se = TRUE) +
facet_wrap(SECU~., ncol = 2)
ggplot(NSFG_data, aes(x = YrEdu, y = income)) +
geom_jitter() +
geom_smooth(method = "loess", se = TRUE) +
facet_wrap(SECU~., ncol = 2)
ggplot(NSFG_data, aes(x = YrEdu, y = income)) +
geom_jitter() +
geom_smooth(method = "loess", se = TRUE) +
facet_wrap(strata~., ncol = 2)
cv.svy(NSFG_data, "income~YrEdu", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_data, "income~YrEdu", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = TRUE)
View(NSFG_data)
cv.svy(NSFG_data, "income~race", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_data, "income~race", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = TRUE)
NSFG_data <- read.csv("data-raw/NSFG_data.csv")
library(devtools)
library(roxygen2)
document()
setwd("~/Desktop/surveyCV/surveyCV")
document()
library(surveyCV)
library(splines)
cv.svy(NSFG_data, "income~ns(YrEdu, df = 1)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_data, "income~ns(YrEdu, df = 1)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = TRUE)
cv.svy(NSFG_data, "income~ns(YrEdu, df = 2)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_data, "income~ns(YrEdu, df = 2)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = TRUE)
cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = TRUE)
library(devtools)
library(roxygen2)
document()
setwd("~/Desktop/surveyCV/surveyCV")
document()
library(surveyCV)
NSFG_data <- read.csv("data-raw/NSFG_data.csv")
NSFG_data$strata <- as.factor(NSFG_data$strata)
NSFG_data$SECU <- as.factor(NSFG_data$SECU)
library(ggplot2)
ggplot(NSFG_data, aes(x = YrEdu, y = income)) +
geom_jitter() +
geom_smooth(method = "loess", se = TRUE) +
facet_wrap(SECU~., ncol = 2)
ggplot(NSFG_data, aes(x = YrEdu, y = income)) +
geom_jitter() +
geom_smooth(method = "loess", se = TRUE) +
facet_wrap(strata~., ncol = 2)
library(splines)
cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = TRUE)
cv.svy(NSFG_data, "income~race", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_data, "income~race", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = TRUE)
View(NSFG_data)
NSFG_hispanic <- NSFG_data %>%
filter(race == "Hispanic")
library(dplyr)
NSFG_hispanic <- NSFG_data %>%
filter(race == "Hispanic")
View(NSFG_hispanic)
cv.svy(NSFG_hispanic, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_hispanic, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250, afolds = FALSE)
cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_hispanic, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250, afolds = FALSE)
NSFG_black <- NSFG_data %>%
filter(race == "Black")
cv.svy(NSFG_black, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250, afolds = FALSE)
cv.svy(NSFG_black, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250, afolds = TRUE)
cv.svy(NSFG_black, "income~race", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250, afolds = FALSE)
cv.svy(NSFG_black, "income~race", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250, afolds = TRUE)
View(NSFG_black)
NSFG_black %>%
count(strata)
NSFG_black %>%
count(SECU)
NSFG_hispanic %>%
count(SECU)
NSFG_hispanic %>%
count(strata)
NSFG_data %>%
count(SECU)
NSFG_data %>%
count(strata)
NSFG_black %>%
count(SECU)
NSFG_black %>%
count(strata)
NSFG_hispanic %>%
count(SECU)
NSFG_hispanic %>%
count(strata)
library(surveyCV)
library(devtools)
cv.svy(NSFG_hispanic, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250, afolds = FALSE)
cv.svy(NSFG_hispanic, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250, afolds = TRUE)
cv.svy(NSFG_hispanic, "income~race", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250, afolds = FALSE)
cv.svy(NSFG_hispanic, "income~race", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250, afolds = TRUE)
cv.svy(NSFG_black, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250, afolds = FALSE)
cv.svy(NSFG_black, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250, afolds = TRUE)
cv.svy(NSFG_black, "income~race", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250, afolds = FALSE)
cv.svy(NSFG_black, "income~race", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250, afolds = TRUE)
NSFG_data %>%
count(SECU)
NSFG_data %>%
count(strata)
NSFG_black %>%
count(SECU)
NSFG_black %>%
count(strata)
NSFG_hispanic %>%
count(SECU)
NSFG_hispanic %>%
count(strata)
cv.svy(NSFG_hispanic, "income~ns(YrEdu, df = 5)", nfolds = 3, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250, afolds = FALSE)
cv.svy(NSFG_hispanic, "income~ns(YrEdu, df = 5)", nfolds = 3, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250, afolds = TRUE)
cv.svy(NSFG_hispanic, "income~race", nfolds = 3, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250, afolds = FALSE)
cv.svy(NSFG_hispanic, "income~race", nfolds = 3, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250, afolds = TRUE)
cv.svy(NSFG_hispanic, "income~race", nfolds = 2, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250, afolds = TRUE)
cv.svy(NSFG_hispanic, "income~race", nfolds = 2, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250, afolds = FALSE)
cv.svy(NSFG_hispanic, "income~ns(YrEdu, df = 5)", nfolds = 2, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250, afolds = TRUE)
cv.svy(NSFG_hispanic, "income~ns(YrEdu, df = 5)", nfolds = 2, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250, afolds = FALSE)
NSFG_hispanic$strata <- as.numeric(NSFG_hispanic$strata)
NSFG_hispanic$SECU <- as.numeric(NSFG_hispanic$SECU)
NSFG_hispanic$strata <- as.factor(NSFG_hispanic$strata)
NSFG_hispanic$SECU <- as.factor(NSFG_hispanic$SECU)
cv.svy(NSFG_hispanic, "income~ns(YrEdu, df = 5)", nfolds = 2, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250, afolds = FALSE)
cv.svy(NSFG_hispanic, "income~ns(YrEdu, df = 5)", nfolds = 2, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250, afolds = TRUE)
cv.svy(NSFG_hispanic, "income~race", nfolds = 2, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250, afolds = FALSE)
cv.svy(NSFG_hispanic, "income~race", nfolds = 2, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250, afolds = TRUE)
View(NSFG_data)
NSFG_data %>%
count(eduCat)
NSFG_data %>%
count(PreMe)
NSFG_PreMe <- NSFG_data %>%
filter(PreMe == "Premature")
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 700, afolds = FALSE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 700, afolds = TRUE)
cv.svy(NSFG_PreMe, "income~race", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 700, afolds = FALSE)
cv.svy(NSFG_PreMe, "income~race", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 700, afolds = TRUE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = TRUE)
cv.svy(NSFG_PreMe, "income~race", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_PreMe, "income~race", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = TRUE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = TRUE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = TRUE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = TRUE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = FALSE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = TRUE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = FALSE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = TRUE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = FALSE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = TRUE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = FALSE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = TRUE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 4)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = FALSE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 4)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = TRUE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 4)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = FALSE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 4)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = TRUE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 4)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = FALSE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 4)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = TRUE)
ggplot(NSFG_PreMe, aes(x = YrEdu, y = income)) +
geom_jitter() +
geom_smooth(method = "loess", se = TRUE) +
facet_wrap(SECU~., ncol = 2)
ggplot(NSFG_PreMe, aes(x = YrEdu, y = income)) +
geom_jitter() +
geom_smooth(method = "loess", se = TRUE) +
facet_wrap(strata~., ncol = 2)
ggplot(NSFG_PreMe, aes(x = YrEdu, y = income)) +
geom_jitter() +
geom_smooth(method = "loess", se = TRUE) +
facet_wrap(SECU~., ncol = 2)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 4)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = FALSE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 4)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = TRUE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 4)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = FALSE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 4)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = TRUE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 4)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = FALSE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 4)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = TRUE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 4)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = FALSE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 4)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = TRUE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = FALSE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = TRUE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = FALSE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = TRUE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = FALSE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = TRUE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 10000, afolds = TRUE)
ggplot(NSFG_PreMe, aes(x = YrEdu, y = income)) +
geom_jitter() +
geom_smooth(method = "loess", se = TRUE) +
facet_wrap(SECU~., ncol = 2)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = TRUE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = TRUE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = TRUE)
library(devtools)
library(roxygen2)
setwd("~/Desktop/surveyCV")
library(surveyCV)
NSFG_data <- read.csv("data-raw/NSFG_data.csv")
NSFG_data$strata <- as.factor(NSFG_data$strata)
NSFG_data$SECU <- as.factor(NSFG_data$SECU)
library(ggplot2)
ggplot(NSFG_data, aes(x = YrEdu, y = income)) +
geom_jitter() +
geom_smooth(method = "loess", se = TRUE) +
facet_wrap(SECU~., ncol = 2)
ggplot(NSFG_data, aes(x = YrEdu, y = income)) +
geom_jitter() +
geom_smooth(method = "loess", se = TRUE) +
facet_wrap(strata~., ncol = 2)
library(splines)
cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, nest = TRUE, weights = "wgt", N = 5100)
cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, nest = TRUE, weights = "wgt", N = 5100)
cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, nest = TRUE, weights = "wgt", N = 5100)
cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
cv.svy(NSFG_data, "income~race", nfolds = 4, nest = TRUE, weights = "wgt", N = 5100)
cv.svy(NSFG_data, "income~race", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
library(dplyr)
NSFG_hispanic <- NSFG_data %>%
filter(race == "Hispanic")
cv.svy(NSFG_hispanic, "income~ns(YrEdu, df = 5)", nfolds = 4, nest = TRUE, weights = "wgt", N = 1250)
cv.svy(NSFG_hispanic, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250)
cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, weights = "wgt", N = 5100)
cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
cv.svy(NSFG_data, "income~race", nfolds = 4, weights = "wgt", N = 5100)
cv.svy(NSFG_data, "income~race", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
cv.svy(NSFG_data, "income~race", nfolds = 4, weights = "wgt", N = 5100)
cv.svy(NSFG_data, "income~race", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
cv.svy(NSFG_hispanic, "income~ns(YrEdu, df = 5)", nfolds = 4, weights = "wgt", N = 1250)
cv.svy(NSFG_hispanic, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250)
cv.svy(NSFG_hispanic, "income~race", nfolds = 4, weights = "wgt", N = 1250)
cv.svy(NSFG_hispanic, "income~race", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250)
NSFG_black <- NSFG_data %>%
filter(race == "Black")
cv.svy(NSFG_black, "income~ns(YrEdu, df = 5)", nfolds = 4, weights = "wgt", N = 1250)
cv.svy(NSFG_black, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250)
cv.svy(NSFG_black, "income~race", nfolds = 4, weights = "wgt", N = 1250)
cv.svy(NSFG_black, "income~race", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 1250)
NSFG_data %>%
count(SECU)
NSFG_data %>%
count(strata)
NSFG_black %>%
count(SECU)
NSFG_black %>%
count(strata)
NSFG_hispanic %>%
count(SECU)
NSFG_hispanic %>%
count(strata)
NSFG_data %>%
count(eduCat)
NSFG_data %>%
count(PreMe)
NSFG_PreMe <- NSFG_data %>%
filter(PreMe == "Premature")
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, weights = "wgt", N = 700)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 700)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, weights = "wgt", N = 700)
cv.svy(NSFG_PreMe, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 700)
library(surveyCV)
library(survey)
library(ISLR)
library(dplyr)
library(splines)
library(sampling)
library(gridExtra)
library(grid)
library(ggplot2)
library(lattice)
data(NSFG_data)
data(NSFG_data)
data("NSFG_data")
NSFG_data <- read.csv("data-raw/NSFG_data.csv")
NSFG_data$strata <- as.factor(NSFG_data$strata)
library(surveyCV)
NSFG_data <- read.csv("data-raw/NSFG_data.csv")
NSFG_data$strata <- as.factor(NSFG_data$strata)
NSFG_data$SECU <- as.factor(NSFG_data$SECU)
library(ggplot2)
ggplot(NSFG_data, aes(x = YrEdu, y = income)) +
geom_jitter() +
geom_smooth(method = "loess", se = TRUE) +
facet_wrap(SECU~., ncol = 2)
ggplot(NSFG_data, aes(x = YrEdu, y = income)) +
geom_jitter() +
geom_smooth(method = "loess", se = TRUE) +
facet_wrap(strata~., ncol = 2)
ggplot(NSFG_data, aes(x = YrEdu, y = income)) +
geom_jitter() +
geom_smooth(method = "loess", se = TRUE) +
facet_wrap(SECU~., ncol = 2) +
labs(x = "Years Educated", y = "Income (Expressed as % of Poverty Level)",
title = "Relationship Separated by Cluster")
ggplot(NSFG_data, aes(x = YrEdu, y = income)) +
geom_jitter() +
geom_smooth(method = "loess", se = TRUE) +
facet_wrap(strata~., ncol = 2) +
labs(x = "Years Educated", y = "Income (Expressed as % of Poverty Level)",
title = "Relationship Separated by Stratum")
library(surveyCV)
library(devtools)
library(roxygen2)
setwd("~/Desktop/surveyCV")
document()
document()
library(devtools)
library(roxygen2)
setwd("~/Desktop/surveyCV")
=======
for (i in 1:loops) {
set.seed(i)
method.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
method.ds2 <- data.frame(df = 5, MSE = method.data[,1])
method.ds <- rbind(method.ds, method.ds2)
ignore.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, weights = "wgt", N = 5100)
ignore.ds2 <- data.frame(df = 5, MSE = ignore.data[,1])
ignore.ds <- rbind(ignore.ds, ignore.ds2)
}
ignore.ds$df <- as.factor(ignore.ds$df)
method.ds$df <- as.factor(method.ds$df)
plot1 <- ggplot(data = ignore.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Ignoring Survey Design") +
ylim(16000, 18000)
# Making a ggplot object for the MSEs where the Cluster function was used on SRS samples
plot2 <- ggplot(data = method.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Taking Into Account the Survey Design") +
ylim(16000, 18000)
# Making a grid display of the four plot objects above
grid.arrange(plot1,plot2, ncol = 2)
}
income.year_edu.plot(loops = 100)
income.year_edu.plot <- function(loops) {
# Making an empty data set for output when we use SRS samples and make SRS folds
method.ds <- data.frame(MSE = c())
# Making an empty data set for output when we use SRS samples and make Cluster folds
ignore.ds <- data.frame(MSE = c())
# Making an empty data set for output when we use Cluster samples and make Cluster folds
# Making as many simple random samples as we specify for 'loops'
for (i in 1:loops) {
set.seed(i)
method.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
method.ds2 <- data.frame(df = 5, MSE = method.data[,1])
method.ds <- rbind(method.ds, method.ds2)
ignore.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, weights = "wgt", N = 5100)
ignore.ds2 <- data.frame(df = 5, MSE = ignore.data[,1])
ignore.ds <- rbind(ignore.ds, ignore.ds2)
}
ignore.ds$df <- as.factor(ignore.ds$df)
method.ds$df <- as.factor(method.ds$df)
plot1 <- ggplot(data = ignore.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Ignoring Survey Design") +
# Making a ggplot object for the MSEs where the Cluster function was used on SRS samples
plot2 <- ggplot(data = method.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Taking Into Account the Survey Design") +
# Making a grid display of the four plot objects above
grid.arrange(plot1,plot2, ncol = 2)
}
income.year_edu.plot(loops = 100)
income.year_edu.plot <- function(loops) {
# Making an empty data set for output when we use SRS samples and make SRS folds
method.ds <- data.frame(MSE = c())
# Making an empty data set for output when we use SRS samples and make Cluster folds
ignore.ds <- data.frame(MSE = c())
# Making an empty data set for output when we use Cluster samples and make Cluster folds
# Making as many simple random samples as we specify for 'loops'
for (i in 1:loops) {
set.seed(i)
method.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
method.ds2 <- data.frame(df = 5, MSE = method.data[,1])
method.ds <- rbind(method.ds, method.ds2)
ignore.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, weights = "wgt", N = 5100)
ignore.ds2 <- data.frame(df = 5, MSE = ignore.data[,1])
ignore.ds <- rbind(ignore.ds, ignore.ds2)
}
ignore.ds$df <- as.factor(ignore.ds$df)
method.ds$df <- as.factor(method.ds$df)
plot1 <- ggplot(data = ignore.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Ignoring Survey Design")
# Making a ggplot object for the MSEs where the Cluster function was used on SRS samples
plot2 <- ggplot(data = method.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Taking Into Account the Survey Design")
# Making a grid display of the four plot objects above
grid.arrange(plot1,plot2, ncol = 2)
}
income.year_edu.plot(loops = 100)
income.year_edu.plot <- function(loops) {
# Making an empty data set for output when we use SRS samples and make SRS folds
method.ds <- data.frame(MSE = c())
# Making an empty data set for output when we use SRS samples and make Cluster folds
ignore.ds <- data.frame(MSE = c())
# Making an empty data set for output when we use Cluster samples and make Cluster folds
# Making as many simple random samples as we specify for 'loops'
for (i in 1:loops) {
set.seed(i)
method.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
method.ds2 <- data.frame(df = 5, MSE = method.data[,1])
method.ds <- rbind(method.ds, method.ds2)
ignore.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, weights = "wgt", N = 5100)
ignore.ds2 <- data.frame(df = 5, MSE = ignore.data[,1])
ignore.ds <- rbind(ignore.ds, ignore.ds2)
}
ignore.ds$df <- as.factor(ignore.ds$df)
method.ds$df <- as.factor(method.ds$df)
plot1 <- ggplot(data = ignore.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Ignoring Survey Design") +
ylim(18000, 19000)
# Making a ggplot object for the MSEs where the Cluster function was used on SRS samples
plot2 <- ggplot(data = method.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Taking Into Account the Survey Design") +
ylim(18000, 19000)
# Making a grid display of the four plot objects above
grid.arrange(plot1,plot2, ncol = 2)
}
income.year_edu.plot(loops = 100)
income.year_edu.plot <- function(loops) {
# Making an empty data set for output when we use SRS samples and make SRS folds
method.ds <- data.frame(MSE = c())
# Making an empty data set for output when we use SRS samples and make Cluster folds
ignore.ds <- data.frame(MSE = c())
# Making an empty data set for output when we use Cluster samples and make Cluster folds
# Making as many simple random samples as we specify for 'loops'
for (i in 1:loops) {
set.seed(i)
method.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
method.ds2 <- data.frame(df = 5, MSE = method.data[,1])
method.ds <- rbind(method.ds, method.ds2)
ignore.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, weights = "wgt", N = 5100)
ignore.ds2 <- data.frame(df = 5, MSE = ignore.data[,1])
ignore.ds <- rbind(ignore.ds, ignore.ds2)
}
ignore.ds$df <- as.factor(ignore.ds$df)
method.ds$df <- as.factor(method.ds$df)
plot1 <- ggplot(data = ignore.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Ignoring Survey Design") +
ylim(18500, 19000)
# Making a ggplot object for the MSEs where the Cluster function was used on SRS samples
plot2 <- ggplot(data = method.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Taking Into Account the Survey Design") +
ylim(18500, 19000)
# Making a grid display of the four plot objects above
grid.arrange(plot1,plot2, ncol = 2)
}
income.year_edu.plot(loops = 1000)
income.year_edu.plot <- function(loops) {
# Making an empty data set for output when we use SRS samples and make SRS folds
method.ds <- data.frame(MSE = c())
# Making an empty data set for output when we use SRS samples and make Cluster folds
ignore.ds <- data.frame(MSE = c())
# Making an empty data set for output when we use Cluster samples and make Cluster folds
# Making as many simple random samples as we specify for 'loops'
for (i in 1:loops) {
set.seed(i)
method.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
method.ds2 <- data.frame(df = 5, MSE = method.data[,1])
method.ds <- rbind(method.ds, method.ds2)
ignore.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, weights = "wgt", N = 5100)
ignore.ds2 <- data.frame(df = 5, MSE = ignore.data[,1])
ignore.ds <- rbind(ignore.ds, ignore.ds2)
}
ignore.ds$df <- as.factor(ignore.ds$df)
method.ds$df <- as.factor(method.ds$df)
plot1 <- ggplot(data = ignore.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Ignoring Survey Design") +
ylim(16000, 19000)
# Making a ggplot object for the MSEs where the Cluster function was used on SRS samples
plot2 <- ggplot(data = method.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Taking Into Account the Survey Design") +
ylim(16000, 19000)
# Making a grid display of the four plot objects above
grid.arrange(plot1,plot2, ncol = 2)
}
income.year_edu.plot(loops = 1000)
income.year_edu.plot(loops = 100)
income.year_edu.plot <- function(loops) {
# Making an empty data set for output when we use SRS samples and make SRS folds
method.ds <- data.frame(MSE = c())
# Making an empty data set for output when we use SRS samples and make Cluster folds
ignore.ds <- data.frame(MSE = c())
# Making an empty data set for output when we use Cluster samples and make Cluster folds
# Making as many simple random samples as we specify for 'loops'
for (i in 1:loops) {
set.seed(i)
method.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
method.ds2 <- data.frame(df = 5, MSE = method.data[,1])
method.ds <- rbind(method.ds, method.ds2)
ignore.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, weights = "wgt", N = 5100)
ignore.ds2 <- data.frame(df = 5, MSE = ignore.data[,1])
ignore.ds <- rbind(ignore.ds, ignore.ds2)
}
ignore.ds$df <- as.factor(ignore.ds$df)
method.ds$df <- as.factor(method.ds$df)
plot1 <- ggplot(data = ignore.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Ignoring Survey Design") +
ylim(18000, 19000)
# Making a ggplot object for the MSEs where the Cluster function was used on SRS samples
plot2 <- ggplot(data = method.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Taking Into Account the Survey Design") +
ylim(18000, 19000)
# Making a grid display of the four plot objects above
grid.arrange(plot1,plot2, ncol = 2)
}
income.year_edu.plot(loops = 100)
income.year_edu.plot(loops = 1000)
income.year_edu.plot(loops = 100)
income.race.plot <- function(loops) {
# Making an empty data set for output when we take into consideration the design method
method.ds <- data.frame(MSE = c())
# Making an empty data set for output when we ignore the design method
ignore.ds <- data.frame(MSE = c())
# looping and generating MSEs
for (i in 1:loops) {
set.seed(i)
method.data <- cv.svy(NSFG_data, "income~race", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
method.ds2 <- data.frame(df = 5, MSE = method.data[,1])
method.ds <- rbind(method.ds, method.ds2)
ignore.data <- cv.svy(NSFG_data, "income~race", nfolds = 4, weights = "wgt", N = 5100)
ignore.ds2 <- data.frame(df = 5, MSE = ignore.data[,1])
ignore.ds <- rbind(ignore.ds, ignore.ds2)
}
ignore.ds$df <- as.factor(ignore.ds$df)
method.ds$df <- as.factor(method.ds$df)
plot1 <- ggplot(data = ignore.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Ignoring Survey Design") +
ylim(18000, 19000)
# Making a ggplot object for the MSE spread comparison
plot2 <- ggplot(data = method.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Taking Into Account the Survey Design") +
ylim(18000, 19000)
# Making a grid display of the two plot objects above
grid.arrange(plot1,plot2, ncol = 2)
}
income.race.plot(loops = 100)
income.race.plot <- function(loops) {
# Making an empty data set for output when we take into consideration the design method
method.ds <- data.frame(MSE = c())
# Making an empty data set for output when we ignore the design method
ignore.ds <- data.frame(MSE = c())
# looping and generating MSEs
for (i in 1:loops) {
set.seed(i)
method.data <- cv.svy(NSFG_data, "income~race", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
method.ds2 <- data.frame(df = 5, MSE = method.data[,1])
method.ds <- rbind(method.ds, method.ds2)
ignore.data <- cv.svy(NSFG_data, "income~race", nfolds = 4, weights = "wgt", N = 5100)
ignore.ds2 <- data.frame(df = 5, MSE = ignore.data[,1])
ignore.ds <- rbind(ignore.ds, ignore.ds2)
}
ignore.ds$df <- as.factor(ignore.ds$df)
method.ds$df <- as.factor(method.ds$df)
plot1 <- ggplot(data = ignore.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Ignoring Survey Design")
#ylim(18000, 19000)
# Making a ggplot object for the MSE spread comparison
plot2 <- ggplot(data = method.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Taking Into Account the Survey Design")
#ylim(18000, 19000)
# Making a grid display of the two plot objects above
grid.arrange(plot1,plot2, ncol = 2)
}
income.race.plot(loops = 100)
# we see a significant difference here
income.year_edu.plot(loops = 100)
income.year_edu.plot <- function(loops) {
# Making an empty data set for output when we take into consideration the design method
method.ds <- data.frame(MSE = c())
# Making an empty data set for output when we ignore the design method
ignore.ds <- data.frame(MSE = c())
#Making an empty dataset for output when we take into account everything except during fold generation
method-fold.ds <- data.frame(MSE = c())
# looping and generating MSEs
for (i in 1:loops) {
set.seed(i)
method.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
method.ds2 <- data.frame(df = 5, MSE = method.data[,1])
method.ds <- rbind(method.ds, method.ds2)
ignore.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, weights = "wgt", N = 5100)
ignore.ds2 <- data.frame(df = 5, MSE = ignore.data[,1])
ignore.ds <- rbind(ignore.ds, ignore.ds2)
method-fold.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = "FALSE")
method-fold.ds2 <- data.frame(df = 5, MSE = method.data[,1])
method-fold.ds <- rbind(method.ds, method.ds2)
}
ignore.ds$df <- as.factor(ignore.ds$df)
method.ds$df <- as.factor(method.ds$df)
method-fold.ds$df <- as.factor(method-fold.ds$df)
# Making a ggplot object for the MSE spread comparison
plot1 <- ggplot(data = ignore.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Ignoring Survey Design") +
ylim(18000, 19000)
plot2 <- ggplot(data = method-fold.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Taking Into Account the Survey Design except during folds") +
ylim(18000, 19000)
plot3 <- ggplot(data = method.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Taking Into Account the Survey Design") +
ylim(18000, 19000)
# Making a grid display of the two plot objects above
grid.arrange(plot1,plot2,plot3, ncol = 3)
}
# we see a significant difference here
income.year_edu.plot(loops = 100)
income.year_edu.plot <- function(loops) {
# Making an empty data set for output when we take into consideration the design method
method.ds <- data.frame(MSE = c())
# Making an empty data set for output when we ignore the design method
ignore.ds <- data.frame(MSE = c())
#Making an empty dataset for output when we take into account everything except during fold generation
method.fold.ds <- data.frame(MSE = c())
# looping and generating MSEs
for (i in 1:loops) {
set.seed(i)
method.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
method.ds2 <- data.frame(df = 5, MSE = method.data[,1])
method.ds <- rbind(method.ds, method.ds2)
ignore.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, weights = "wgt", N = 5100)
ignore.ds2 <- data.frame(df = 5, MSE = ignore.data[,1])
ignore.ds <- rbind(ignore.ds, ignore.ds2)
method-fold.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = "FALSE")
method.fold.ds2 <- data.frame(df = 5, MSE = method.data[,1])
method.fold.ds <- rbind(method.ds, method.ds2)
}
ignore.ds$df <- as.factor(ignore.ds$df)
method.ds$df <- as.factor(method.ds$df)
method.fold.ds$df <- as.factor(method.fold.ds$df)
# Making a ggplot object for the MSE spread comparison
plot1 <- ggplot(data = ignore.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Ignoring Survey Design") +
ylim(18000, 19000)
plot2 <- ggplot(data = method.fold.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Taking Into Account the Survey Design except during folds") +
ylim(18000, 19000)
plot3 <- ggplot(data = method.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Taking Into Account the Survey Design") +
ylim(18000, 19000)
# Making a grid display of the two plot objects above
grid.arrange(plot1,plot2,plot3, ncol = 3)
}
# we see a significant difference here
income.year_edu.plot(loops = 100)
income.year_edu.plot <- function(loops) {
# Making an empty data set for output when we take into consideration the design method
method.ds <- data.frame(MSE = c())
# Making an empty data set for output when we ignore the design method
ignore.ds <- data.frame(MSE = c())
#Making an empty dataset for output when we take into account everything except during fold generation
method.fold.ds <- data.frame(MSE = c())
# looping and generating MSEs
for (i in 1:loops) {
set.seed(i)
method.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
method.ds2 <- data.frame(df = 5, MSE = method.data[,1])
method.ds <- rbind(method.ds, method.ds2)
ignore.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, weights = "wgt", N = 5100)
ignore.ds2 <- data.frame(df = 5, MSE = ignore.data[,1])
ignore.ds <- rbind(ignore.ds, ignore.ds2)
method.fold.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = "FALSE")
method.fold.ds2 <- data.frame(df = 5, MSE = method.fold.data[,1])
method.fold.ds <- rbind(method.ds, method.ds2)
}
ignore.ds$df <- as.factor(ignore.ds$df)
method.ds$df <- as.factor(method.ds$df)
method.fold.ds$df <- as.factor(method.fold.ds$df)
# Making a ggplot object for the MSE spread comparison
plot1 <- ggplot(data = ignore.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Ignoring Survey Design") +
ylim(18000, 19000)
plot2 <- ggplot(data = method.fold.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Taking Into Account the Survey Design except during folds") +
ylim(18000, 19000)
plot3 <- ggplot(data = method.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("MSEs When Taking Into Account the Survey Design") +
ylim(18000, 19000)
# Making a grid display of the two plot objects above
grid.arrange(plot1,plot2,plot3, ncol = 3)
}
# we see a significant difference here
income.year_edu.plot(loops = 100)
income.year_edu.plot <- function(loops) {
# Making an empty data set for output when we take into consideration the design method
method.ds <- data.frame(MSE = c())
# Making an empty data set for output when we ignore the design method
ignore.ds <- data.frame(MSE = c())
#Making an empty dataset for output when we take into account everything except during fold generation
method.fold.ds <- data.frame(MSE = c())
# looping and generating MSEs
for (i in 1:loops) {
set.seed(i)
method.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
method.ds2 <- data.frame(df = 5, MSE = method.data[,1])
method.ds <- rbind(method.ds, method.ds2)
ignore.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, weights = "wgt", N = 5100)
ignore.ds2 <- data.frame(df = 5, MSE = ignore.data[,1])
ignore.ds <- rbind(ignore.ds, ignore.ds2)
method.fold.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = "FALSE")
method.fold.ds2 <- data.frame(df = 5, MSE = method.fold.data[,1])
method.fold.ds <- rbind(method.ds, method.ds2)
}
ignore.ds$df <- as.factor(ignore.ds$df)
method.ds$df <- as.factor(method.ds$df)
method.fold.ds$df <- as.factor(method.fold.ds$df)
# Making a ggplot object for the MSE spread comparison
plot1 <- ggplot(data = ignore.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("Ignoring Design") +
ylim(18000, 19000)
plot2 <- ggplot(data = method.fold.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("No Folds") +
ylim(18000, 19000)
plot3 <- ggplot(data = method.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("Accounting for Design") +
ylim(18000, 19000)
# Making a grid display of the two plot objects above
grid.arrange(plot1,plot2,plot3, ncol = 3)
}
income.year_edu.plot <- function(loops) {
# Making an empty data set for output when we take into consideration the design method
method.ds <- data.frame(MSE = c())
# Making an empty data set for output when we ignore the design method
ignore.ds <- data.frame(MSE = c())
#Making an empty dataset for output when we take into account everything except during fold generation
method.fold.ds <- data.frame(MSE = c())
# looping and generating MSEs
for (i in 1:loops) {
set.seed(i)
method.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100)
method.ds2 <- data.frame(df = 5, MSE = method.data[,1])
method.ds <- rbind(method.ds, method.ds2)
ignore.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, weights = "wgt", N = 5100)
ignore.ds2 <- data.frame(df = 5, MSE = ignore.data[,1])
ignore.ds <- rbind(ignore.ds, ignore.ds2)
method.fold.data <- cv.svy(NSFG_data, "income~ns(YrEdu, df = 5)", nfolds = 4, strataID = "strata",
clusterID = "SECU", nest = TRUE, weights = "wgt", N = 5100, afolds = FALSE)
method.fold.ds2 <- data.frame(df = 5, MSE = method.fold.data[,1])
method.fold.ds <- rbind(method.ds, method.ds2)
}
ignore.ds$df <- as.factor(ignore.ds$df)
method.ds$df <- as.factor(method.ds$df)
method.fold.ds$df <- as.factor(method.fold.ds$df)
# Making a ggplot object for the MSE spread comparison
plot1 <- ggplot(data = ignore.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("Ignoring Design") +
ylim(18000, 19000)
plot2 <- ggplot(data = method.fold.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("No Folds") +
ylim(18000, 19000)
plot3 <- ggplot(data = method.ds, mapping = aes(x = df, y = MSE)) +
geom_boxplot() +
ggtitle("Accounting for Design") +
ylim(18000, 19000)
# Making a grid display of the two plot objects above
grid.arrange(plot1,plot2,plot3, ncol = 3)
}
# we see a significant difference here
income.year_edu.plot(loops = 10)
# we see a significant difference here
income.year_edu.plot(loops = 100)
document()
library(devtools)
>>>>>>> b94257a71031235e278401546a8ce8528a35a09a
document()
document()
library(surveyCV)
library(surveyCV)
<<<<<<< HEAD
=======
library(surveyCV)
data("NSFG_data")
library(devtools)
?usethis::use_data()
?usethis::use_data(NSF_data)
usethis::use_data(NSF_data)
usethis::use_data(NSFG_data)
load("~/Desktop/surveyCV/data/NSFG_data.rda")
load("~/Desktop/surveyCV/data/NSFG_data.rda")
View(NSFG_data)
library(surveyCV)
>>>>>>> b94257a71031235e278401546a8ce8528a35a09a
